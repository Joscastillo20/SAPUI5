<mvc:View controllerName="PF.rrhh.controller.EmployeeCreate"
          xmlns:core="sap.ui.core"
          xmlns:mvc="sap.ui.core.mvc"
          displayBlock="true"
          xmlns:form="sap.ui.layout.form"
          xmlns:l="sap.ui.layout"
          xmlns="sap.m">

<NavContainer id="wizardNavContainer">
	<pages>
	<Page title="{i18n>headerCreateEmp}" 
		  id="wizardContentPage"
		  showHeader="true"
          class="sapUiResponsivePadding--header sapUiResponsivePadding--content">
				
	<Wizard
		id="wizard"
        finishButtonText="{i18n>revisar}"
        complete="wizardCompletedHandler"
		class="sapUiResponsivePadding--header sapUiResponsivePadding--content">

		<WizardStep id="EmployeeTypeStep"
					title="{i18n>employeeType}">
			<MessageStrip class="sapUiSmallMarginBottom"
					text="{i18n>employeeTypeText}"
					showIcon="true"/>
			<HBox
					alignItems="Center"
					justifyContent="Center"
					width="100%">
				<SegmentedButton
						width="320px">
					<Button text="{i18n>interno}" press="toStep2"/>
                    <!-- Establece valor de selección de tipo de empleado -->
                    <customData>
						<core:CustomData key="typeEmployee" value="interno" writeToDom="true"></core:CustomData>
					</customData>
					<Button text="{i18n>auto}"    press="toStep2"/>
                    <!-- Establece valor de selección de tipo de empleado -->
                    <customData>
						<core:CustomData key="typeEmployee" value="auto" writeToDom="true"></core:CustomData>
					</customData>                    
					<Button text="{i18n>gerente}" press="toStep2"/>
                    <!-- Establece valor de selección de tipo de empleado -->
                    <customData>
						<core:CustomData key="typeEmployee" value="gerente" writeToDom="true"></core:CustomData>
					</customData>                    
				</SegmentedButton>
			</HBox>
		</WizardStep>
    		<WizardStep id="EmployeeDataStep"
					title="{i18n>employeeData}"
                    validated="false"
					activate="validateEmployeeStep">
			<MessageStrip class="sapUiSmallMarginBottom"
					text="{i18n>employeeDataText}"
					showIcon="true"/>
			
			<form:SimpleForm editable="true" 
            layout="ResponsiveGridLayout">
            <!-- Nombre de Empleado -->

            	<Label text="{i18n>name}" required="true"/>
				<Input  id="EmployeeName"
                        change="validateEmployeeStep"
                        value="{/FirstName}"
                        width="50%"
                        placeholder="{i18n>enterName}"
                        valueState="{/_EmployeeName}"
                        showValueStateMessage="false"/>  
                             
<!-- valueState  se construye dinámicamente si no tiene valor campo es erro  Error/Information/None/Succes/Warning-->                        
 				 <!-- Nombre de Empleado -->
 
                 <Label text="{i18n>lastName}" required="true"/>
				<Input  id="EmployeeLastName"
                        liveChange="validateEmployeeStep"
                        valueLiveUpdate="true"
                        value="{/LastName}"
                        placeholder="{i18n>enterLastName}"
                        valueState="{/_EmployeeLastName}"
                        width="50%"
                        showValueStateMessage="false"
                        />
     
                 <!-- DNI visible solo para tipo = Interno / Gerente -->    

                <Label text="{i18n>dni}" required="true"/>
				<Input  id="dni"
                        width="50%"
                        liveChange="validateEmployeeStep"
                        valueLiveUpdate="true"
                        visible="{=  ${/_Type} !== 'Autonomo'}"
                        value="{/Dni}"
                        placeholder="{i18n>dni}"
                        showValueStateMessage="false"
                        valueState="{/_dni}"/>   
                 <!-- CFI visible solo para tipo = Autonomo -->   
				<Label text="{i18n>cfi}" required="true"/>
				<Input  id="cfi"
                        visible="{=  ${/_Type} === 'Autonomo'}"
                        valueLiveUpdate="true"
			            liveChange="validateEmployeeStep"
                        value="{/_Dni}"
                        width="50%"
                        placeholder="{i18n>cfi}"
                        showValueStateMessage="false"
                        valueState="{/_cfi}"/>                                             
               <!-- Saldo Bruto Interno -->    
               <!-- Saldo Bruto Gerente -->             
                <core:Fragment fragmentName="PF.rrhh.fragment.slider" type="XML"/>
                
                <!-- Precio Diario  Autonomo -->  
               <Label text="{i18n>precioDiario}"  visible="{=  ${/_Type} === 'Autonomo'}" /> 
	                <l:VerticalLayout class="sapUiContentPadding" width="100%">
		                <Slider min="100" 
                                max="2000" 
                                step="100" 
                                value="{/_Salary}"
                                enableTickmarks="true" 
                                width="80%"
                                inputsAsTooltips="true" 
                                showAdvancedTooltip="true" 
                                class="sapUiMediumMarginBottom"
                                progress="true" 
                                visible="{=  ${/_Type} === 'Autonomo'}">
			                 <ResponsiveScale tickmarksBetweenLabels="100"/>
		                </Slider>
	                </l:VerticalLayout>                    
            <!-- Fecha de incorporación -->            
          <Label text="{i18n>dateInc}" required="true"></Label>               
         <HBox>
            <VBox>
			<DatePicker id="date"
                        dateValue="{/CreationDate}" 
                        valueState="{/_CreationDateState}" 
                        required="true"
                        valueFormat="yyyy-MM-dd"
                        placeholder="{i18n>enterDate}"
                        showValueStateMessage="false"
                        change="validateEmployeeStep"></DatePicker>     
            </VBox>
        </HBox>

            </form:SimpleForm>
			
		</WizardStep>    
         <WizardStep id="AdittionalStep"
					title="{i18n>AdittionalData}"
					activate="optionalStepActivation"
                    validated="true">
			<MessageStrip 
					text="{i18n>AdittionalDataText}"
					showIcon="true"
                    class="sapUiMediumMarginTop"/>
			
			<form:SimpleForm
				editable="true"
				layout="ResponsiveGridLayout"
                width="100%" >
				<Label text="{i18n>coment}" />
				<TextArea  value="{/Comments}" growing="true" width="100%"/>

			</form:SimpleForm>    
                <Panel>
                    <UploadCollection id="UploadCollection"
                              maximumFilenameLength="55"
                              maximumFileSize="10"
                              multiple="true"
                              sameFilenameAllowed="true"
                              instantUpload="false"
                              uploadUrl="/sap/opu/odata/sap/ZEMPLOYEES_SRV/Attachments"
                              change="onFileChange"
                              uploadComplete="onFileUploadComplete"
                              beforeUploadStarts="onFileBeforeUpload"
                              fileDeleted="onFileDeleted"
                              noDataDescription="{i18n>Arrastrarficheros}"/>    
                  </Panel>                                    
		</WizardStep>    
        </Wizard>
 <footer>
                     <Bar>
                         <contentRight> 
                         <Button icon="sap-icon://menu" press="onCloseEmployeeCreate" tooltip="{i18n>closeEmployeeCreate}"></Button>
                         </contentRight>
                     </Bar>                          
				  </footer>		         
				</Page>
<Page id="ReviewPage" title="{i18n>resumen}"> 	
<core:Fragment fragmentName="PF.rrhh.fragment.resumen" type="XML"/>						
 <footer>
                     <Bar>
                         <contentRight> 
                         <Button icon="sap-icon://save" press="onSaveEmployeeCreate" tooltip="{i18n>saveEmployeeCreate}"/>
                         <Button icon="sap-icon://sys-cancel-2" press="onCancelEmployeeCreate" tooltip="{i18n>cancelEmployeeCreate}"/>
                        
                         </contentRight>
                     </Bar>                          
				  </footer>
							</Page>                
			</pages>
           </NavContainer> 

</mvc:View>    